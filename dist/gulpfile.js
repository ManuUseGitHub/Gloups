/*jshint esversion: 6 */
/*jshint ignore:start */
var pjson=require("./package.json"),GLOUPS_VERSION=pjson.version;process.title="Gloups "+GLOUPS_VERSION+" | Chears !";var glob_timer,gulp=require("gulp"),chalk=require("chalk"),M={autoprefixer:"gulp-autoprefixer",childprocess:"child_process",cleanCSS:"gulp-clean-css",clear:"clear",coffee:"gulp-coffee",concat:"gulp-concat",del:"del",exit:"gulp-exit",fs:"fs",fssync:"fs-sync",insert:"gulp-insert",jsValidate:"gulp-jsvalidate",lazyPipe:"lazypipe",less:"gulp-less",nop:"gulp-nop",path:"path",progress:"progress",rename:"gulp-rename",replace:"gulp-replace",sass:"gulp-sass",sourcemaps:"gulp-sourcemaps",stylefmt:"gulp-stylefmt",stylus:"gulp-stylus",through:"through2",ts:"gulp-typescript",uglify:"gulp-uglifyes",uglifyDef:"gulp-uglify",wait:"gulp-wait"},SERVICES={t:"typescript",c:"coffeescript",s1:"less",s2:"sass",s3:"stylus",minj:"automin",minc:"autominCss",tr:"transitive",es:"essential",n:"name",a:"all",all:"automin typescript coffeescript autominCss less sass stylus",styles:"autominCss less sass stylus",js:"automin typescript coffeescript",cof:"automin coffeescript",tps:"automin typescript"},NOPE="ACTUALY NOPE :( !",PRESET_OPTIONS="all|styles|cof|tps|js",SERVICES_OPTIONS="automin|autominCss|typescript|coffeescript|less|sass|stylus",SERVICES_ADVANCED_OPTIONS="transitive|essential|name",ALL_SERVICES_OPTIONS=PRESET_OPTIONS+"|"+SERVICES_OPTIONS+"|"+SERVICES_ADVANCED_OPTIONS,JS_REGEX_FILE_PATH_PATTERN="^(?:((?:[^\\.]+|..)[\\x2F\\x5C])|)((?:([^\\.^\\x2F^\\x5C]+)(?:((?:[.](?!\\bmin\\b)(?:[^\\.]+))+|))(?:([.]min)([.]js)|([.]js))))$",FILE_COVERAGE_REGEXP=/^(.*)[\\\/]\*\*[\\\/]\*\..*$/,FILE_STARTING_BY_UNDERSCORE=/^.*[\/\\](_.*)$/i,GLOUPS_OPTIONS=SERVICES_OPTIONS+"|"+PRESET_OPTIONS,SILENT_TASKS="watch|vet|unit-test|integration-test",ISALL=!0,AUTOPREFIXER_BROWSERS=["> 1%","last 2 versions","firefox >= 4","safari 7","safari 8","IE 8","IE 9","IE 10","IE 11"],DEFAULT_CONFIG={verbose:!1,pathesToJs:[],pathesToTs:[],pathesToCoffee:[],pathesToStyle:[],pathesToStyleLess:[],pathesToSass:[],pathesToStylus:[],projects:[]},isdist={},config=getConfig(),glob_found_modules={fs:!0},glob_visited_elements={infunc:{},intask:{}},glob_logging_obj={},glob_mayLogEssentials=metAllArgs(["essential"]);class classReading{constructor(){this.line_=null,this.data_=null,this.iter_=null,this.stopped_=!1}initialize(e,t){this.data_=e+" ",this.iter_=t,this.line_=[]}readLines(e){for(var t;!this.stopped&&(t=this.getNextChar());)/^[\n\r]$/g.test(t)||this.isEndReached()?(this.toLine(),e(this.line),this.resetLine()):this.feed(t)}stop(){this.stopped=!0}get stopped(){return this.stopped_}set stopped(e){this.stopped_=e}get iter(){return this.iter_}set iter(e){this.iter_=e}get data(){return this.data_}set data(e){this.data_=e}get line(){return this.line_}set line(e){this.line_=e}toLine(){this.line=this.line.join(""),this.line=this.line.replace(/^[\n\r]$/g,"")}resetLine(){this.line=[]}getNextChar(){return this.data[this.iter++]}isEndReached(){return!this.data[this.iter]}feed(e){this.line_.push(e)}}String.prototype.format=function(e){return this.replace(String.prototype.format.regex,function(t){var s=parseInt(t.substring(1,t.length-1));return s>=0?e[s]:-1===s?"{":-2===s?"}":""})},String.prototype.format.regex=new RegExp("{-?[0-9]+}","g"),String.prototype.hackSlashes=function(){return this.replace(/[\\]/g,"/")},String.prototype.replaceAll=function(e,t){return this.replace(new RegExp(e,"g"),t)};var cmd=String(process.argv[2]);if(ISALL||new RegExp("^(({0})(:.*)?)$".format([SILENT_TASKS])).test(cmd)){var isWatching=/^(watch:.*)$/.test(cmd),firstCall=!1,on=gulp.on;gulp.on=function(e,t){if(!/^(task_start|task_stop)$/.test(e)||!/gutil\.log\(\s*'(Starting|Finished)/.test(t.toString()))return on.apply(gulp,arguments)},gulp.on("start",function(){firstCall&&(isWatching&&process.stdout.write(""),firstCall=!1)}),gulp.on("stop",function(){firstCall=!0})}function getModule(e){if("string"==typeof e)for(var t in M)if(M[t]==e){var s=new Date;M[t]=require(e);var n=ms2Time(new Date-s);return isdist.NOT_DISTRIBUTION&&console.log(forNowShortLog(" {0}{1} loaded after {2}".format([chalk.bgMagenta(" M:"),chalk.bgMagenta(e+" "),chalk.magenta(n)]))),M[t]}return e}var logOrig=console.log;function gloupslog(e){var t=/^([\s](?:(?:[^\s]+[\s]?)+)[\s]+)(['].*['])$/.exec(e);isPulseTask()&&t?gloupsHandlingPulseLogging({action:t[1],path:t[2]}):logOrig(e)}function fireEnventOnEveryCoveredFiles(e){e.sort(function(e,t){return e.localeCompare(t)}).forEach(function(e,t){gulp.src(e).pipe(gulp.dest(function(e){return e.base}))})}function runTaskProcessForCompression(e,t,s){var n=createMainLazyPipeObject(t,"Compressed    ",s.module),o=watchList(t);gulp.watch(o,function(e){var o=e.path;if(checkMultipleRules(o,["deleted"!==e.type].concat(s.rules))){n.forMatchingObj.path=o;var i=getMatchingEntryConfig(o,t);n.pathesDescr=i,n.process=s.mainPipe,n.source_kind="simple",consumePipeProcss(null,n,[o])}})}function runTaskProcessForPrecompiledFiles(e,t,s){var n=createMainLazyPipeObject(t,"Processed     ",s.module),o=watchList(t),i=getFreshTransitivity();gulp.watch(o,function(e){var o=e.path;if(checkMultipleRules(o,s.rules)){n.forMatchingObj.path=o;var a=getMatchingEntryConfig(o,t);n.process=s.mainPipe;var r=s.realTargetsFunction(o,a);n.source_kind="complex",consumePipeProcss(i,n,r)}})}function consumePipeProcss(e,t,s){var n=transitiveAndSourcemappingWrap(e,t);t.destCallBack=function(s){return s&&(isPulseTask()||gloupslog(""),logLongWaiting(t)),null!=e?e.dest:t.pathesDescr.dest},gulp.src(s).pipe(n()).on("end",function(){logChangedRealTargetedFiles(t,s),exitOnPulseAfterCount(),exitCountForLongLog()}).on("error",function(e){var t=e.cause,s=logStuffedSpaceOverflowing(" "+(t=t?JSON.stringify(t):e.message),align().left,chalk.bgWhite.red.inverse);console.log(" "+chalk.bgRed.black(logStuffedSpaceMessage("Plugin : "+e.plugin,align().left))),console.log(" {0}".format([s]))}).pipe(applyLicenceSplitting(t)).pipe(gulp.dest(t.destCallBack(!0)))}function exitCountForLongLog(){isPulseTask()||clearInterval(glob_timer)}function exitOnPulseAfterCount(){isPulseTask()&&resetTimer({total:100,format:":bar pulse closing in (:countdown)"},function(){gulp.start("clear"),gloupslogSumerise(),process.exit()},100)}function isPulseTask(){return"pulse"==process.argv[2]}function logLongWaiting(e){"complex"==e.source_kind&&resetTimer({total:2},function(){console.log(" "+chalk.bgYellow(" ! ")+" Long process ... few secondes required")})}function resetTimer(e,t,s){var n=e.format?e.format:"";/.*:countdown.*/.test(n)&&e.total++;var o=new(getModule(M.progress))(n,{total:e.total,width:80,complete:String.fromCharCode(9608),incomplete:chalk.grey(".")});glob_timer&&clearInterval(glob_timer),glob_timer=setInterval(function(){/.*:countdown.*/.test(n)?o.tick({countdown:e.total-o.curr-1}):o.tick(),o.complete&&(t(),clearInterval(glob_timer))},s||500)}function transitiveAndSourcemappingWrap(e,t){var s=t.forMatchingObj,n=s.path,o=s.pathesDescr,i=t.message,a=getMatchingEntryConfig(n,o);return setSourceMappingAndSign(transitiveWrapAround(e,a,n,t),a,i)}function setSourceMappingAndSign(e,t,s){var n=t.sourcemaps;return getModule(M.lazyPipe)().pipe(n?getModule(M.sourcemaps).init:getModule(M.nop)).pipe(e).pipe(insertSignatureAfter,s.action,s.module).pipe(n?function(){return getModule(M.sourcemaps).write("./")}:getModule(M.nop))}function transitiveWrapAround(e,t,s,n){return null!=e&&"draft"==e.dest&&transitivitySetupCore(e,t,s),applyLazyPipeSet({opening:null!=e?getModule(M.lazyPipe)().pipe(transitivitySetup,e,t,s):getModule(M.nop),closing:null!=e?getModule(M.lazyPipe)().pipe(e.suffixing).pipe(e.compressing):getModule(M.nop),main:n})}function applyLazyPipeSet(e){var t=e.main.process,s=e.main.source_kind;return"simple"==s?getModule(M.lazyPipe)().pipe(e.opening).pipe(lisencesSetup(t)).pipe(separateLisences(t)).pipe(t).pipe(separatePreemptedLisences(t)).pipe(e.closing):"complex"==s?getModule(M.lazyPipe)().pipe(e.opening).pipe(lisencesSetup(t)).pipe(t).pipe(separateLisences(t)).pipe(e.closing):void 0}function transitivitySetup(e,t,s){return getModule(M.through).obj(function(n,o,i){transitivitySetupCore(e,t,s),i(null,n)})}function shouldBeTransitive(){return metAllArgs(["all","transitive"])||metAllArgs(["sass","autominCss","transitive"])||metAllArgs(["stylus","autominCss","transitive"])||metAllArgs(["less","autominCss","transitive"])||metAllArgs(["coffeescript","automin","transitive"])||metAllArgs(["typescript","automin","transitive"])}function transitivitySetupCore(e,t,s){var n=!1;if(e.dest=t.dest,shouldBeTransitive()){var o=/^.*[\/](.*)$/g.exec(s.hackSlashes())[1],i="{0}/{1}".format([t.dest,o]),a=/.*[.](coffee|ts)$/.test(o)?"JS":/.*[.](scss|styl|less)$/.test(o)?"CSS":"UNDEFINED",r=getMatchingEntryConfig(i,"JS"==a?config.pathesToJs:"CSS"==a?config.pathesToStyle:null);n=null!=r,e.should=n,n&&(e.compressing="JS"==a?getModule(M.uglify):"CSS"==a?cleanCssMinification:getModule(M.nop),e.suffixing=renameSuffixMin,e.dest=r.dest)}}function renameSuffixMin(){return getModule(M.rename)(function(e){e.extname=".min"+e.extname})}function renameCustomSuffix(e){return getModule(M.rename)(function(t){t.extname=e+t.extname})}function cleanCssMinification(){return getModule(M.cleanCSS)({compatibility:"ie8"})}function insertSignatureAfter(e,t){return getModule(M.insert).append("\n/* -- {0} wth Gloups v {1} - {2} | thanks to {3} -- */".format([e.replace(/[\s]+$/,""),GLOUPS_VERSION,shortDateComputed(),t]))}function autoprefix(){return getModule(M.autoprefixer)({browsers:AUTOPREFIXER_BROWSERS,cascade:!1})}function logChangedRealTargetedFiles(e,t){var s,n=e.forMatchingObj.pathesDescr,o=e.message.action,i=0;if(t.length>1)t.forEach(function(e){i++>0&&(o="              "),s=getProjectNameWithFileFromPathDesc(n,e),gloupslog(" {0} '{1}{2}'".format([o,chalk.bgCyan(" "+s.projectName+" "),chalk.cyan(s.fileName+" ")]))});else{var a=t[0].hackSlashes();s=getProjectNameWithFileFromPathDesc(n,a),gloupslog(" {0} '{1}{2}'".format([o,chalk.bgCyan(" "+s.projectName+" "),chalk.cyan(s.fileName+" ")]))}}function getProjectNameWithFileFromPathDesc(e,t){var s=/[^\/\\]*(\/.*)/.exec(t)[1];s=".."+s;var n,o="<PROJECT NM>";for(var i in e){var a,r=e[i].projectPath.split("/").join("\\/")+"(.*)$";if(a=new RegExp(r,"g").exec(s)){o=e[i].projectName,n=a[1];break}}return{projectName:o,fileName:n}}function separateLisences(e){return getModule(M.lazyPipe)().pipe(function(){return getModule(M.through).obj(function(t,s,n){var o="simple"==e.lisences.source_kind?getModule(M.fs).readFileSync(t.path,"utf8"):"complex"==e.lisences.source_kind?t._contents.toString():"";if("complex"==e.lisences.source_kind){var i=distributeLisencesOutOfChunk(e,o);shouldBeTransitive()&&(t._contents=Buffer.from(i,"utf8"))}else"simple"==e.lisences.source_kind&&(t._contents=Buffer.from(distributeLisencesOutOfChunk(e,o),"utf8"),e.preemptedData=Buffer.from(e.lisences.data,"utf8"));n(null,t)})})}function separatePreemptedLisences(e){return getModule(M.lazyPipe)().pipe(function(){return getModule(M.through).obj(function(t,s,n){var o=e.preemptedData.toString();distributeLisencesOutOfChunk(e,o),n(null,t)})})}function lisencesSetup(e){return e.lisences={data:"",source_kind:""},getModule(M.lazyPipe)().pipe(function(){return getModule(M.through).obj(function(t,s,n){e.lisences.source_kind=/.*[.](?:scss|styl|less|ts|coffee)$/.test(t.path)?"complex":/.*[.](?:css|js)$/.test(t.path)?"simple":"unknown",n(null,t)})})}function aLazyPipeThatIsPipingLikeNop(){return getModule(M.lazyPipe)().pipe(getModule(M.nop))}function distributeLisencesOutOfChunk(e,t){var s=readLisences(t);return e.lisences.data=s.lisences,s.not_lisences}function readLisences(e){var t=new classReading;t.initialize(e,0);var s={reading:t,line:"",cpt:0,result:[],anti_result:[],canprint:!1,inLisence:!1,line_count:.5};return t.readLines(function(){readingLisencesProcess(s)}),{lisences:s.result.join("\n"),not_lisences:s.anti_result.join("\n")}}function readingLisencesProcess(e){e.line=e.reading.line,e.canprint=!1,/^.*(?:\/\*!).*(?:\*\/).*$/.test(e.line)?e.canprint=!0:/^.*(?:\/\*!).*$/.test(e.line)?(e.canprint=!0,e.inLisence=!0):e.inLisence&&/^.*(?:\*\/).*$/.test(e.line)&&(e.canprint=!0,e.inLisence=!1),inLisenceProcess(e)}function inLisenceProcess(e){e.inLisence&&((e.line.length>0||++e.cpt%3==2)&&(e.canprint=!0),e.line.length>0&&(e.cpt=0)),e.canprint?e.result.push(e.line):e.anti_result.push(e.line),e.line_count+=.5,Number.isInteger(e.line_count)}function applyLicenceSplitting(e){return getModule(M.through).obj(function(t,s,n){var o=e.process.lisences;if(o&&""!=o.data){var i=/^.*[\/\\]([^\.]+.*)min.(css|js)$/.exec(t.path.hackSlashes());if(i&&/^.*[.]min[.].*$/.test(t.path.hackSlashes())){var a=e.destCallBack(!1)+"/"+i[1]+"lisence."+i[2];getModule(M.fssync).write(a,"{0} \n/* -- {1} with Gloups v {2} - {3} | thanks to {4} -- */".format([o.data,"Lisence(s) exported",GLOUPS_VERSION,shortDateComputed(),"gulp-through2 ; gulp-fssync"]),"utf8");var r=getProjectNameWithFileFromPathDesc(e.forMatchingObj.pathesDescr,a.hackSlashes());gloupslog(" {0} '{1}{2}'".format(["Lis. reported ",chalk.bgCyan(" "+r.projectName+" "),chalk.cyan(r.fileName+" ")]))}}n(null,t)})}function contains(e,t){for(var s=e.length;s--;)if(e[s]===t)return!0;return!1}function getMatchingPrincipalSCSS(e,t){var s=/^.*[\/\\](.*)$/.exec(t);if(s&&s[1]&&/^_.*$/.test(s[1])){var n=(s=/^(.*[\\\/])_?(.*)[.].*$/g.exec(t))[1]+s[2],o=e.length,i=pathEllipzizeing(n,0,t.substr(o).split("/").length),a=[],r=config.sassMaching;for(var l in r)contains(r[l].partials,i)&&a.push(r[l].target);return a}return[t]}function getFreshTransitivity(){return{should:!1,dest:"draft",compressing:getModule(M.nop),suffixing:getModule(M.nop)}}function createMainLazyPipeObject(e,t,s){return{process:null,destCallBack:function(){return gulp.dest("draft")},forMatchingObj:{path:null,pathesDescr:e},message:{action:t,module:s,files:[]}}}function checkMultipleRules(e,t,s){var n=t[s=void 0!=s?s:0],o=!0;if(void 0!=n)if("boolean"==typeof n)o=o&&!!n&&checkMultipleRules(e,t,++s);else if("object"==typeof n)if(n instanceof Array)"string"==typeof n[1]&&(n[1]=new RegExp(n[1],"g")),o="!"==n[0]&&!n[1].test(e);else{if(!(n instanceof RegExp))return gloupslog(chalk.red("undefined case ...")),!1;o=o&&!!o&&checkMultipleRules(e,t,++s)}else{if("string"!=typeof n)return gloupslog(chalk.red("undefined case ...")),!1;o=(o=new RegExp(n,"g").test(e))&&!!o&&checkMultipleRules(e,t,++s)}return o}function getConfig(){return config||DEFAULT_CONFIG}function readJsonConfig(e){var t,s,n=getModule(M.fs).readFileSync(e,"utf8"),o=new classReading;o.initialize(n,0);var i=0,a=!0,r="",l=(t=/^(.*)(\.json)$/.exec(e))[1]+".temp"+t[2],c=t[1]+"2.temp"+t[2];getModule(M.fssync).write(l,"","utf8"),o.readLines(function(){s=o.line,(a=t=/^(.*)\/\/.*$/g.exec(s))?r=t[1]:(a=t=/^(.*)\/\*$/g.exec(s))?(r=t[1],++i):(a=t=/^.*\*\/(.*)$/g.exec(s))?(r=t[1],--i):(a=0==i)&&(r=s),a&&(/^[\s]*$/g.test(r)||(getModule(M.fs).appendFileSync(c,r+"\r\n","utf8"),getModule(M.fs).appendFileSync(l,/^[\s\t]*((?:[^\s\t]*[\s\t]*[^\s\t])+)[\s\t]*$/.exec(r)[1],"utf8")))});var g=getModule(M.fs).readFileSync(l,"utf8");return getModule(M.fssync).remove(l),getModule(M.fssync).remove(c),JSON.parse(g.replace(/}(,)]/g,"}]"))}function setConfig(){config.projects=require("./custom/config.js")}function makePathesCoveringAllFilesFor(e,t,s,n){var o=t.addon,i=t.pathesToService;if(t.projectPath=e,o){for(var a=0,r=o.length;a<r;++a){o[a].watch=o[a].watch+s;o[a].watch,o[a].dest;0<a&&(n="[SAME-PURPOSE]");var l=getProjectNameFromRootPath(e);logServiceActivatedPushed(n,l,o[a]),o[a].watch=e+"/"+o[a].watch,o[a].dest=e+"/"+o[a].dest,o[a].projectPath=e,o[a].projectName=l,i=i.concat(o[a])}config.verbose&&console.log()}return i}function purgeCoverage(e){var t;if((t=getCurrentRunningDirectory())!=NOPE){var s=[];config.projects.forEach(function(e,n){var o=e.path;if(/^..\/(.+)$/.exec(o)){var i="^(?:{0}.*)".format([o.replaceAll("/","\\/")]);new RegExp(i,"g").test(t)&&(s.push(e),s.length>1&&(s=keepBest(s,e)))}}),config.projects=s}}function keepBest(e){for(var t=0,s=[e[0]],n=0,o=e.length;n<o;++n){var i=e[n];e[t].path.length<i.path.length&&(t=n)}var a=e[t];return(s=[]).push(a),s}function coverFoldersToServe(e){for(var t in purgeCoverage(e),config.projects){var s=config.projects[t];if("*"==e.scope||s.project==e.scope)if(getModule(M.fssync).exists(s.path+"\\config.mzg.js")){if(s.checked){if(e.shouldLog&&!isPulseTask()){var n=logStuffedSpaceMessage(s.project,align().center);console.log(" {0}".format([chalk.bgGreen(n)]))}setUpProjectWatchingPaths(s.path,e.shouldLog)}}else e.shouldLog&&!isPulseTask()&&logProjectErrored(s)}}function fireEnventOnEveryCoveredFiles(e){e.sort(function(e,t){return e.localeCompare(t)}).forEach(function(e,t){gulp.src(e).pipe(gulp.dest(function(e){return e.base}))})}function getEveryFilesCoveredOnce(e){var t={};return e.forEach(function(e,s){getModule(M.fssync).exists(e)&&walkSync(e,[],FILE_STARTING_BY_UNDERSCORE).forEach(function(e,s){t[e.path]=!0})}),Object.keys(t)}function getAllServiceCoverageWatchFolders(){var e=[];return[].concat(config.pathesToJs,config.pathesToTs,config.pathesToCoffee,config.pathesToStylus,config.pathesToSass,config.pathesToStyle,config.pathesToStyleLess).forEach(function(t,s){t&&e.push(FILE_COVERAGE_REGEXP.exec(t.watch)[1])}),e}function findProjectBinding(e){var t=!1;return config.projects.forEach(function(s){var n;if(n=/^..\/(.+)$/.exec(s.path)){var o="^[^\\/]+\\/(?:{0})$".format([n[1].replaceAll("/","\\/")]);new RegExp(o).test(e)&&(t=!0)}}),t}function fixProjectBinding(e,t){if(!t){console.log("No registration for :"+logFilePath(e+"\\config.mzg.js")+" updating now !");var s=translateAliassesInArgs(process.argv,SERVICES),n=getOptionValue(s,getSliceOfMatchingOptions(s,SERVICES_ADVANCED_OPTIONS)[0]),o={project:n=null!=n?n:/^.*\/(.*)/.exec(e)[1],path:"{0}/{1}".format(["..",/^[^\/]+\/(.*)/.exec(e)[1]]),checked:!0};config.projects.push(o),writeModuleFromObject("custom/config.js",config.projects)}getModule(M.fssync).exists(e+"\\config.mzg.js")||(console.log("file :"+logFilePath(e+"\\config.mzg.js")+" does not exist ... creation very soon"),gulp.src("custom/config.mzg.js").pipe(getModule(M.rename)("config.mzg.js")).pipe(gulp.dest(e)))}function writeModuleFromObject(e,t,s=null){var n=/^((?:[^\/]+\/?)+)\/.*/.exec(e);n=null!=n?n[1]:"./";getModule(M.fssync).write(e,"","utf8"),gulp.src(e).pipe(getModule(M.insert).append(JSON.stringify(t,null,4))).pipe(getModule(M.insert).append(";")).pipe(getModule(M.insert).prepend("module.exports = ")).pipe(getModule(M.insert).prepend(["/*"," _____________________________________________________________________________________________","|                                                                                             |","|                               -- YOUR PROJECTS MAPPING HERE --                              |","|_____________________________________________________________________________________________|","*/\n"].join("\n"))).pipe(gulp.dest(n))}function setUpProjectWatchingPaths(e,t){var s=require(e+"/config.mzg.js"),n=removeUnconsistentServices(s);if(t&&!isPulseTask())if(n){var o=logStuffedSpaceMessage(" No service ",align().center);console.log(" {0}\n".format([chalk.bgWhite.yellow.inverse(o)]))}else{var i=logStuffedSpaceOverflowing(" Services of path : ",align().left,chalk.bgWhite.cyan.inverse);console.log(" {0}".format([i]));var a=logStuffedSpaceOverflowing(e,align().center,chalk.bgCyan.black);console.log(" {0}\n".format([a]))}config.pathesToJs=makePathesCoveringAllFilesFor(e,{pathesToService:config.pathesToJs,addon:s.minify_js},"/**/*.js","Compress .js files into .min.js files"),config.pathesToTs=makePathesCoveringAllFilesFor(e,{pathesToService:config.pathesToTs,addon:s.ts_to_js},"/**/*.ts","Compile .ts files into .js file"),config.pathesToCoffee=makePathesCoveringAllFilesFor(e,{pathesToService:config.pathesToCoffee,addon:s.coffee_to_js},"/**/*.coffee","Compile .coffee files into .js file"),config.pathesToStyle=makePathesCoveringAllFilesFor(e,{pathesToService:config.pathesToStyle,addon:s.minify_css},"/**/*.css","Compress .css files"),config.pathesToStyleLess=makePathesCoveringAllFilesFor(e,{pathesToService:config.pathesToStyleLess,addon:s.less},"/**/*.less","Compile .less files into .css files"),config.pathesToSass=makePathesCoveringAllFilesFor(e,{pathesToService:config.pathesToSass,addon:s.sass},"/**/*.scss","Compile .scss files into .css files"),config.pathesToStylus=makePathesCoveringAllFilesFor(e,{pathesToService:config.pathesToStylus,addon:s.stylus},"/**/*.styl","Compile .styl files into .css files")}function removeUnconsistentServices(e){var t=e,s=!0;for(var n in t)0==t[n].length?delete e[n]:s&&(s=!1);return s}function getMatchingEntryConfig(e,t){for(var s in e=e.hackSlashes(),t){var n=t[s],o=n.watch.hackSlashes(),i=(n.dest.hackSlashes(),new RegExp("^([^\\\\/*]+).([^\\*]+)([\\/]?[\\/*]+[\\/]?)(.*)$","g").exec(o)[2]);if(new RegExp("^.*(?:"+i+").*$","g").exec(e))return n}return null}function watchList(e){var t=[];for(var s in e){var n=e[s].watch;t.push(n)}return t}function watchListLight(e){var t=[];return e.forEach(function(e){var s=e.watch,n=e.projectPath.length,o=s.substr(n);t.push({project:e.projectName,watch:o})}),t}function mappSassMatching(e,t){var s;if((s=/^(.*)[\\\/]\*\*[\\\/]\*\..*$/.exec(t))&&s[1]){config.sassMaching=[];var n=0;walkSync(s[1],[],new RegExp("^.*[\\/](_.*)$","i")).forEach(function(t){config.sassMaching.push({identifier:t.fileName,target:t.path,partials:[]}),pushEllipsizedPartials(e,t,n++)})}}function pushEllipsizedPartials(e,t,s){var n=new classReading,o=getModule(M.fs).readFileSync(t.path,"utf8");n.initialize(o,0);var i,a,r=e.length;n.readLines(function(){if(i=n.line,(a=/^@import[\s]+["](.*)["]/.exec(i))&&a[1]){var e="{0}/{1}".format([t.dir,a[1]]),o=pathEllipzizeing(e,0,e.substr(r).split("/").length);config.sassMaching[s].partials.push(o)}})}function pathEllipzizeing(e,t,s){var n="^(?:(?:((?:[^/\\]+[\\/]{-1}1,2{-2}){-1}{0}{-2}).*((?:[\\/][^/\\?]+){-1}{1},{-2}[\\/]?)[^?]*).*|([^?]*).*)$".format([t,s]),o=new RegExp(n,"g").exec(e);return o[3]?o[3]:o[1]+"..."+o[2]}function walkSync(e,t,s){var n=getModule(M.fs).readdirSync(e),o=getModule(M.path);return t=t||[],n.forEach(function(n){getModule(M.fs).statSync(o.join(e,n)).isDirectory()?t=walkSync(o.join(e,n),t,s):s.test(e+"/"+n)||t.push({dir:e.hackSlashes(),path:(e+"/"+n).hackSlashes(),fileName:n})}),t}function getProjectNameFromRootPath(e){var t=getConfig().projects;for(var s in t)if(e==t[s].path)return t[s].project;return e}function translateAliassesInArgs(e,t){var s,n=[];return e.forEach(function(e){(s=/^-([^\-]+)$/.exec(e))?n.push("--"+t[s[1]]):n.push(e)}),n}function getCurrentRunningDirectory(){var e=process.argv,t=!1,s={data:NOPE};return e.forEach(function(e){if(/^--currentDir$/.exec(e))t=!0;else if(t)return void(s.data=e)}),s.data.hackSlashes()}function getSliceOfMatchingOptions(e,t){var s=0,n=0;try{e.forEach(function(e){if(!new RegExp("^--("+t+")$","g").test(e)){if(s!=n)throw{};s++}n++})}catch(e){}return e.slice(s,n)}function getOptionValue(e,t){var s=null;try{e.forEach(function(n,o){if(n==t)throw s=e[o+1],{}})}catch(e){}return s}function metAllArgs(e){var t="";getSliceOfMatchingOptions(translateAliassesInArgs(process.argv,SERVICES),ALL_SERVICES_OPTIONS).forEach(function(e,s){var n=new RegExp("^--(.*)$","g").exec(e)[1];0!=s&&(t+="|"),t+=n});var s=!1;for(var n in e){var o=e[n];if(!new RegExp("^("+t+")$","g").test(o)){s=!0;break}}return!s}function tasksToRunOnArgvs(){var e=[],t=[],s=0,n=getSliceOfMatchingOptions(translateAliassesInArgs(process.argv,SERVICES),GLOUPS_OPTIONS);for(var o in n){try{o=/^[\-][\-]?([^\-]+)$/.exec(n[o])[1],new RegExp("^\\b("+PRESET_OPTIONS+")\\b$").test(o)?(checkPresetsOverdose(++s,o),e=SERVICES[o].split(" ")):e.push(o)}catch(s){if(t.push(s+" Error with option: "),/^GRAVE ERROR.*$/.test(s)){e=[];break}}s++}return logErrorsOnTaskArgvs(t),e}function checkPresetsOverdose(e,t){if(e>1)throw"GRAVE ERROR: Presets should be alone : "+t}function breath(){return"           "}function logFilePath(e){return"'{0}'".format([chalk.cyan(e)])}function logHelp(){var e,t,s=getModule(M.fs).readFileSync("help.md","utf8"),n=new classReading;n.initialize(s,0);var o=0;console.log("\n\n"),n.readLines(function(){t=n.line.replace(/\r?\n|\r/g,""),(e=/^([\s]*[#]+.*)$/.exec(t))?console.log(chalk.cyan(e[1])):(e=/^([\s]*)([$](?:[\s][^\s]+)+)([\s]{2,}.*|.*)$/.exec(t))?console.log("{0}{1}{2}".format([chalk.grey(e[1]),e[2],chalk.green(e[3])])):(e=/^([\s]*[>].*)$/.exec(t))?console.log(chalk.green(e[1])):(e=/^([\s]*)([\-]+[^\s,]+)([^\-.]*)((?:[\s][\-]+[^\s]+)+)([^\-.]*)((?:[.][^.\s]+)+|)([^\-.]*)((?:[.][^.\s]+)+|)(.*)$/.exec(t))?console.log("{0}{1}{2}{3}{4}{5}{6}{7}{8}".format([chalk.grey(e[1]),e[2],chalk.grey(e[3]),e[4],chalk.grey(e[5]),chalk.magenta(e[6]),chalk.grey(e[7]),chalk.magenta(e[8]),chalk.grey(e[9])])):(e=/^([^\-]*)((?:[\-]+[^\s]+[\s]?)+)([\s]?.*)$/.exec(t))?console.log("{0}{1}{2}".format([chalk.grey(e[1]),e[2],chalk.grey(e[3])])):t.length>0?console.log(chalk.grey(t)):++o%3==2&&console.log(t),t.length>0&&(o=0)})}function logErrorsOnTaskArgvs(e){e.length>0&&console.log("{0}\n{1}\n{2}\n{3}".format(chalk.red(e.join("\n"))),["WARNING \n\nYou may have made mistakes in shoosing wrong options.","call the folowing command to have more info of what options are valid","gulp --help"])}function logProjectErrored(e){gloupslog(" {0}  - SOMETHING IS WRONG \n".format([chalk.bgRed(" "+e.project+" ")])),gloupslog(" {0} {1}\n".format([logFilePath(e.path+"/config.mzg.json"),chalk.red(": MISMATCH")])),console.log(getColoredParagraph(" The path to that folder does not match to an actual project root folder containing a config.mzg.json file.",chalk.bgRed)+"\n\n {0}\n".format([chalk.bgWhite.black(" SOLUTION ")])+"\n"+getColoredParagraph(" ",chalk.bgWhite.grey)+getColoredParagraph(" Check the path to see if there is no mistake and fix it in the project definition.",chalk.bgWhite.grey)+"\n"+getColoredParagraph(" ",chalk.bgWhite.grey)+getColoredParagraph(" You can otherwise run the command to set up a configuration file at this path and also create nonexistent folders :",chalk.bgWhite.grey)+"\n"+getColoredParagraph(" $ gulp scanProjects",chalk.bgWhite.black)+getColoredParagraph(" ",chalk.bgWhite.grey))}function logStuffedSpaceOverflowing(e,t,s=null){var n=getStuffingObj(),o=[],i=[],a=0,r=n.trailing_space_count+n.leading_space_count,l=process.stdout.columns-r;do{if(a+1==e.length||i.length+r>l){a+1==e.length&&"\n"!=e[a]&&i.push(e[a]);var c=getStuffingObj();c.messages=i.join(""),c.align=t,s?o.push(s(logStuffedSpaceMessageCore(c))):o.push(logStuffedSpaceMessageCore(c)),i=[]," "==e[0]&&i.push(" "),i.push(e[a])}else if("\n"==e[a]){var g=l-i.length-1;" ".repeat(g).split(" ").forEach(function(e){i.push(" ")})}else i.push(e[a])}while(a++<e.length);return o.join("\n"+(0<n.leading_space_count?" ".repeat(n.leading_space_count):""))}function logStuffedSpaceMessage(e,t){var s=getStuffingObj();return s.messages=e,s.align=t,logStuffedSpaceMessageCore(s)}function logStuffedSpaceMessageCore(e){var t=process.stdout.columns;normalizeStuffMessages(e);for(var s=0,n=e.messages.length;s<n;++s)t-=e.messages[s].length;if(t-=e.leading_space_count,t-=e.trailing_space_count,1==e.messages.length)return getSingleMessageStuffedSapceAligned(e,t)}function getSingleMessageStuffedSapceAligned(e=getStuffingObj(),t){if(!e.align||!align().existingPosition(e.align))return e.messages[0];if(e.align){if(e.align==align().left)return e.messages[0]+" ".repeat(t);if(e.align==align().right)return" ".repeat(t)+e.messages[0];if(e.align==align().center){var s=t/2,n=t-s,o=(process.stdout.columns-t)%2;return" ".repeat(s)+e.messages[0]+" ".repeat(n+o)}}}function getColoredParagraph(e,t){var s=process.stdout.columns;return t(e+Array(s-e.length%s).join(" "))}function logProcessCompleteOnFile(e,t,s){try{var n=new Date;s();var o=ms2Time(new Date-n);e.length>1?(console.log(forNowShortLog("{0} of these files:\n".format([t]))),e.forEach(function(e){console.log(logFilePath(e))}),console.log(),console.log(forNowShortLog("after {0}".format([chalk.magenta(o)])))):console.log(forNowShortLog("{0} {1} after {2}".format([logFilePath(e),t,chalk.magenta(o)])))}catch(e){console.log(chalk.red(e))}}function ms2Time(e){var t,s,n;return[(n=Math.floor((s=Math.floor((t=Math.floor((e=Math.floor(e%1e3))/1e3%60))%60))%24))?n+"h ":"",s?s+"min ":"",t?t+"sec ":"",e,"ms"].join("")}function dateComputed(){var e=new Date;return[["Mon","Tues","Wednes","Thurth","Fri","Satur","Sun"][e.getDay()-1],"day,",[e.getMonth()+1,e.getDate(),e.getFullYear()].join("-")].join("")}function twodigits(e){return("0"+e).slice(-2)}function shortDateComputed(){var e=new Date;return[twodigits(e.getMonth()+1),twodigits(e.getDate()),e.getFullYear()].join("-")}function timeComputed(){var e=new Date;return[e.getHours(),e.getMinutes(),e.getSeconds()].join(":")}function forNowLongLog(e,t){return"[{0}] {1}".format([chalk.gray(dateComputed()),e.format(t)])}function forNowShortLog(e,t){var s=e.format(t);return"[{0}] {1}".format([chalk.gray(timeComputed()),s])}function logServiceActivatedPushed(e,t,s){if(config.verbose){var n;(n=/^([^.]+)([.][^\s]*)([^.]+)([.][^\s]*)([^.]+)$/.exec(e))?console.log("{0}{1}{2}{3}{4}".format([chalk.grey(n[1]),chalk.magenta(n[2]),chalk.grey(n[3]),chalk.magenta(n[4]),chalk.grey(n[5])])):(n=/^([^.]+)([.][^\s]*)([^.]+)$/.exec(e))&&console.log("{0}{1}{2}".format([chalk.grey(n[1]),chalk.magenta(n[2]),chalk.grey(n[3])])),console.log(" Watch :'{0}{1}'\n Dest. :'{2}{3}'".format([chalk.bgCyan(" "+t+" "),chalk.cyan("/"+s.watch+" "),chalk.bgCyan(" "+t+" "),chalk.cyan("/"+s.dest+" ")]));var o=s.sourcemaps;void 0!==o&&console.log(o?"         "+chalk.bgGreen(" Sourcemaps ! "):"")}}function logTaskPurpose(e){logTaskName(e);var t={setVars:"  Sets configuration variables \n  See the mapping file to set Gloups able to serve your projects here :\n  > "+logFilePath("custom/config.mzg.ini")+":\n",automin:"  Will uglify .js files matching the folowing path(s):\n",typescript:"  Will compile .ts files matching the folowing path(s):\n",coffeescript:"  Will compile .coffee files matching the folowing path(s):\n",autominCss:"  Will compress .css files matching the folowing path(s):\n",less:"  Will process .less files matching the folowing path(s):\n",sass:"  Will process .sass files matching the folowing path(s):\n",stylus:"  Will process .styl files matching the folowing path(s):\n",scanProjects:"  Creates configuration file in every project root folder\n"};t[e]?(console.log(t[e]),logWatchList(e)):console.log(chalk.yellow("  no information provided \n"))}function logWatchList(e){var t={automin:config.pathesToJs,typescript:config.pathesToTs,coffeescript:config.pathesToCoffee,autominCss:config.pathesToStyle,less:config.pathesToStyleLess,sass:config.pathesToSass,stylus:config.pathesToStylus};t[e]&&(watchListLight(t[e]).forEach(function(e,t){console.log("    '{0}{1}'".format([chalk.bgCyan(" "+e.project),chalk.cyan(e.watch+" ")]))}),console.log())}function logTaskName(e){console.log("\n {0}{1}\n".format([chalk.bgWhite.black(" T:"),chalk.bgWhite.black(e+" ")]))}function logTaskEndUgly(e){console.log("      > which is uglyfied "+chalk.red("for performances")),e?console.log("  once: "+chalk.red("not watching specific files")+"\n"):console.log()}function logTaskEndBeauty(e){console.log("      > which is beautifull "+chalk.red("for debugging")+"\n"),e?console.log("  once: "+chalk.red("not watching specific files")+"\n"):console.log()}function gloupsHandlingPulseLogging(e){var t=e.action.replace(/^[\s]+/,"").replace(/[\s]+$/,""),s=e.path;glob_logging_obj[t]||(glob_logging_obj[t]={}),glob_logging_obj[t][s.replace(/'/,"")]||(glob_logging_obj[t][s.replace(/'/,"")]=!0)}function gloupslogSumerise(){Object.keys(glob_logging_obj).forEach(function(e,t){t>0&&logOrig("\n");var s=Object.keys(glob_logging_obj[e]);logOrig(" Files labeled {0} ({1})\n".format([chalk.bgRed(" "+e+" "),s.length])),s.sort(function(e,t){return e.localeCompare(t)}).forEach(function(e,t){logOrig(" "+e)})})}function normalizeStuffMessages(e){Array.isArray(e.messages)||(e.messages=[e.messages])}function getStuffingObj(){return{messages:["Hello world"],leading_space_count:1,trailing_space_count:1,h_align:align().left}}function align(){return{right:"right",left:"left",center:"center",existingPosition:function(e){return e==this.right||(e==this.left||e==this.center)}}}glob_mayLogEssentials&&(console.log=function(){},gloupslog(forNowShortLog(chalk.bgRed(" Logging only essential messages ")))),gulp.task("setup",function(e){getModule(M.childprocess).exec('"Windows/gloupsp.bat"',function(t,s,n){console.log(s),console.log(n),e(t)})}),gulp.task("default",["setParams"]),gulp.task("clear",function(){process.stdout.write("c")}),gulp.task("setVars",function(){for(var e in setConfig(),isdist.NOT_DISTRIBUTION&&getModule(M.path),config.verbose||isPulseTask()||logTaskPurpose(this.currentTask.name),coverFoldersToServe({scope:"*",shouldLog:!0}),config.pathesToSass){var t=config.pathesToSass[e].watch;mappSassMatching(config.pathesToSass[e].projectPath,t)}isdist.NOT_DISTRIBUTION&&!isPulseTask()&&(config.verbose||console.log(forNowLongLog("{0}\n",["config externalized under config.json"])),gulp.start("externalizeConfig")),config.verbose||isPulseTask()||console.log(forNowLongLog("{0}\n",["CONFIGURATON PROCEEDED"]))}),gulp.task("setParams",function(){var e,t=this.seq.slice(-1)[0];if(/^default$/.test(t))e=tasksToRunOnArgvs(),gulp.start(e.length>0?["setVars"].concat(e):[]);else if(/^serve$/.test(t))process.title="Gloups {0} | {1}".format([GLOUPS_VERSION,"Serve"]),e=tasksToRunOnArgvs(),isdist.NOT_DISTRIBUTION&&getAllNeededModules(e.concat(["setVars"])),gulp.start(e.length>0?["setVars"].concat(e):[]);else if(/^rewrite$/.test(t)){process.title="Gloups {0} | {1}".format([GLOUPS_VERSION,"Rewrite"]);var s=configurationOfRewriteOnArvs(),n=!/^ugly$/.test(s.uglyness),o=!/^multiple$/.test(s.times);isdist.NOT_DISTRIBUTION&&getAllNeededModules(["rewrite","writeTemp","writeDist","applyTemp","applyDist"]),logTaskName("rewrite {0}-{1} mode".format([n?"imBeauty":"imUgly",o?"one shot":"watching"])),mergingOnChanges(n,o),(n?logTaskEndBeauty:logTaskEndUgly)(o)}}),gulp.task("helpMe",function(){logHelp()}),gulp.task("scanProjects",function(){logTaskPurpose(this.currentTask.name),setConfig(),config.projects.forEach(function(e){getModule(M.fssync).exists(e.path+"\\config.mzg.js")||(console.log("creation of {0} which didn't exist".format([logFilePath(e.path+"/config.mzg.js")])),gulp.src("custom/config.mzg.js").pipe(getModule(M.rename)("config.mzg.js")).pipe(gulp.dest(e.path)))})}),gulp.task("scanHere",function(){var e;(e=getCurrentRunningDirectory())!=NOPE&&(logTaskPurpose(this.currentTask.name),setConfig(),fixProjectBinding(e,findProjectBinding(e)))}),gulp.task("pulse",function(){process.title="Gloups {0} | {1}".format([GLOUPS_VERSION,"Pulse !"]);var e=tasksToRunOnArgvs();isdist.NOT_DISTRIBUTION&&getAllNeededModules(e.concat(["setVars","pulse"])),setConfig(),gulp.start("clear"),gulp.start(e.length>0?["setVars"].concat(e):[]);var t=getEveryFilesCoveredOnce(getAllServiceCoverageWatchFolders());if(t.length>0)gloupslog("Applying services ... please wait"),console.log(" "+chalk.bgYellow(" ! ")+" Long process ... few secondes required"),fireEnventOnEveryCoveredFiles(t);else{var s;if((s=getCurrentRunningDirectory())!=NOPE)if(findProjectBinding(s))gloupslog([""," "+chalk.bgYellow(logStuffedSpaceMessage("No services found. It may occures for different reasons.",align().center))," "+chalk.bgYellow.black(logStuffedSpaceMessage(" Points :",align().left))," "+chalk.bgYellow(logStuffedSpaceMessage(" (a) you did not change the config.mzg file",align().left))," "+chalk.bgYellow(logStuffedSpaceMessage(" (b) you've made a mistake while writing matches into the config.mzg file",align().left))," "+chalk.bgYellow(logStuffedSpaceMessage(" (c) Gloups may have a problem (unlikely but possible) ",align().left))].join("\n"));else gloupslog([""," "+chalk.bgRed(logStuffedSpaceMessage("No services configuration found.",align().center))," "+chalk.bgRed(logStuffedSpaceMessage(" set a project configuration entry by running: gloups scanHere",align().left))].join("\n"));process.exit()}}),gulp.task("serviceMapping",function(){logTaskPurpose(this.currentTask.name),config.verbose=!0,gulp.start(["setVars"])}),gulp.task("serve",["setParams"]),gulp.task("automin",function(){var e={module:"gulp-uglify",rules:[JS_REGEX_FILE_PATH_PATTERN,["!",/.*(?:.min.js|.lisence.js)$/]],lisences:null,mainPipe:null};e.mainPipe=getModule(M.lazyPipe)().pipe(getModule(M.uglify)).pipe(renameSuffixMin),runTaskProcessForCompression(this,config.pathesToJs,e)}),gulp.task("typescript",function(){var e={module:"gulp-typescript",rules:[/.*.ts$/],mainPipe:getModule(M.lazyPipe)().pipe(function(){return getModule(M.ts)({noImplicitAny:!0})}),realTargetsFunction:function(e,t){return[e]}};runTaskProcessForPrecompiledFiles(this,config.pathesToTs,e)}),gulp.task("coffeescript",function(){var e={module:"gulp-coffee",rules:[/.*.coffee$/],mainPipe:getModule(M.lazyPipe)().pipe(function(){return getModule(M.coffee)({bare:!0})}),realTargetsFunction:function(e,t){return[e]}};runTaskProcessForPrecompiledFiles(this,config.pathesToCoffee,e)}),gulp.task("autominCss",function(){var e={module:"gulp-clean-css",rules:[/^.*.css$/,["!",/^.*(?:.min.css|.lisence.css|.less|.scss|.map)$/]],lisences:null,mainPipe:null};e.mainPipe=getModule(M.lazyPipe)().pipe(autoprefix).pipe(cleanCssMinification).pipe(renameSuffixMin),runTaskProcessForCompression(this,config.pathesToStyle,e)}),gulp.task("less",function(){var e={module:"gulp-less",rules:[/.*.less$/],lisences:null,mainPipe:null,realTargetsFunction:function(e,t){return[e]}};e.mainPipe=getModule(M.lazyPipe)().pipe(function(){return getModule(M.less)({paths:[getModule(M.path).join(__dirname,"less","includes")]})}).pipe(autoprefix).pipe(getModule(M.stylefmt)),runTaskProcessForPrecompiledFiles(this,config.pathesToStyleLess,e)}),gulp.task("sass",function(){var e={module:"gulp-sass",rules:[/.*.scss$/],lisences:null,mainPipe:null,realTargetsFunction:function(e,t){return getMatchingPrincipalSCSS(t.projectPath,e.hackSlashes())}};e.mainPipe=getModule(M.lazyPipe)().pipe(function(){return getModule(M.sass)({indentedSyntax:!1}).on("error",function(e){})}).pipe(autoprefix).pipe(getModule(M.stylefmt)),runTaskProcessForPrecompiledFiles(this,config.pathesToSass,e)}),gulp.task("stylus",function(){var e={module:"gulp-stylus",rules:[/.*.styl$/],mainPipe:getModule(M.lazyPipe)().pipe(function(){return getModule(M.stylus)({"include css":!0,linenos:!0})}).pipe(autoprefix).pipe(getModule(M.stylefmt)),realTargetsFunction:function(e,t){return[e]}};runTaskProcessForPrecompiledFiles(this,config.pathesToStylus,e)}),gulp.Gulp.prototype.__runTask=gulp.Gulp.prototype._runTask,gulp.Gulp.prototype._runTask=function(e){this.currentTask=e,this.__runTask(e)};
/* -- Provided wth Gloups v 7.0.0-beta - 09-11-2018 | thanks to gulp- uglify, replace, concat, insert -- */